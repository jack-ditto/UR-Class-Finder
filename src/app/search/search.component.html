<!-- Popup if backend server is unreacheable -->
<div
    class="alert alert-warning text-center server-unreacheable"
    *ngIf="serverUnreacheable"
>
    <a
        (click)="serverUnreacheable = false"
        class="close"
        data-dismiss="alert"
        aria-label="close"
    >
        &times;
    </a>
    <strong>Attention:</strong>
    There was an error connecting to the backend
  server. You can show test data here to see how the app works
    <button
        class="btn btn-outline-dark ml-3"
        (click)="onClickTestData()"
    >
        Test Data
    </button>
</div>

<div class="main">
    <!-- ----------------- HEADING -------------------- -->
    <h1 class="display-3 text-center heading mb-0 text-primary">Welcome to UR Class Finder.</h1>
    <h3 class="text-muted display-5 text-center pb-3 sub">
        <small>
            It's so much better than the Bannerweb one.
        </small>
    </h3>

    <!-- ---------------- SEARCH FORM ----------------- -->
    <form
        class="form-inline text-center"
        (ngSubmit)="onSubmit(f)"
        #f="ngForm"
        style="width: 100%; margin: 0 auto;"
    >
        <div class="row mb-3 form-group col-10 offset-1">
            <!-- Class name input -->
            <div class="input-group m-1">
                <input
                    id="className"
                    name="className"
                    ngModel
                    class="form-control"
                    type="text"
                    placeholder="Class Name"
                    size=17
                >
            </div>
            <!-- CRN input -->
            <div class="input-group m-1 ">
                <input
                    id="crn"
                    name="crn"
                    ngModel
                    class="form-control"
                    type="text"
                    placeholder="CRN"
                    size=10
                >
            </div>
            <!-- Professor input -->
            <div class="input-group m-1">
                <input
                    id="professor"
                    name="professor"
                    ngModel
                    class="form-control"
                    type="text"
                    placeholder="Professor"
                    size=17
                >
            </div>
            <!-- Department dropdown -->
            <div class="input-group m-1">
                <ss-multiselect-dropdown
                    id="department"
                    name="department"
                    ngModel
                    [options]="dropdownOptions"
                    [texts]="dropdownTextsSettings"
                    [settings]="dropdownRegSettings"
                    [(ngModel)]="dropdownSelectedValues"
                ></ss-multiselect-dropdown>
            </div>
            <!-- Search button -->
            <div class="input-group m-1">
                <button
                    class="btn btn-outline-primary form-control"
                    type="submit"
                >
                    Search
                </button>
            </div>
            <!-- Planner button -->
            <div class="input-group m-1">
                <button
                    [disabled]="! this.classesService.getCurrentCart().length > 0"
                    class="btn btn-primary form-control"
                    routerLink="planner"
                >
                    Go to planner
                </button>
            </div>
        </div>
    </form>

    <app-table
        [classes]="classes"
        (addButtonClicked)="addToCart($event)"
        (removeButtonClicked)="removeFromCart($event)"
    ></app-table>
    <!-- Placeholder text before data is loaded by search -->
    <h4
        class="text-center text-muted display-5"
        *ngIf="classes.length == 0 && !fetchingData"
    >
        <small>Search above to find classes...</small>
    </h4>
    <h4
        class="text-center text-muted display-5"
        *ngIf="fetchingData"
    >
        <div
            class="spinner-border"
            role="status"
        >
            <span class="sr-only">Loading...</span>
        </div>
    </h4>

</div>
