<!-- Info modal template -->
<ng-template
    #content
    let-d="dismiss"
>
    <div class="modal-header">
        <h4
            class="modal-title"
            id="modal-basic-title"
        >
            Info
        </h4>
        <button
            type="button"
            class="close"
            aria-label="Close"
            (click)="d('Cross click')"
        >
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <p>
            Hey there. This app was created because I think that the Bannerweb search function for classes
            <strong>could use some improvement</strong>
            and I hope that this app can provide a good alternative.
        </p>
        <p>
            With that being said,
            <strong>
                Bannerweb is the only reliable source of information regarding classes.
            </strong>
            Please use this app, but also please check that the information you get here is correct sooner than 10 minutes before class selection. I will do my best to keep this site up to date.
        </p>
        <p>
            This site is not affiliated with the University of Richmond.
        </p>
        <p>
            Finally, please feel free to contact me with any bugs / suggestions.
        </p>
        <p>
            <strong>Email:</strong>
            jack.ditto@richmond.edu
        </p>
        <p>
            <strong>Digits:</strong>
            (601) 874-9522
        </p>
        <p>
            <strong>Classes Last Updated:</strong>
            {{ dateLastUpdated }}
        </p>
    </div>
    <div class="modal-footer"></div>
</ng-template>
<!-- Popup if backend server is unreacheable -->
<div
    class="alert alert-warning text-center server-unreacheable"
    *ngIf="serverUnreacheable"
>
    <a
        (click)="serverUnreacheable = false"
        class="close"
        data-dismiss="alert"
        aria-label="close"
    >
        &times;
    </a>
    <strong>Attention:</strong>
    There was an error connecting to the backend server.
    <!-- You can show test data here to see how the app works
    <button
        class="btn btn-outline-dark ml-3"
        (click)="onClickTestData()"
    >
        Test Data
    </button> -->
</div>

<div class="main">
    <!-- ----------------- HEADING -------------------- -->
    <h1 class="display-3 text-center heading mb-0 text-primary">Welcome to UR Class Finder.</h1>
    <h3 class="text-muted display-5 text-center pb-3 sub">
        <small>
            It's so much better than the Bannerweb one.
            <a>
                <i
                    class="fa fa-info-circle fa-xs"
                    (click)="open(content)"
                    aria-hidden="true"
                ></i>
            </a>
        </small>
    </h3>

    <!-- ---------------- SEARCH FORM ----------------- -->
    <form
        class="form-inline text-center"
        (ngSubmit)="onSubmit(f)"
        #f="ngForm"
        style="width: 100%; margin: 0 auto;"
    >
        <div class="row mb-3 form-group col-10 offset-1">
            <!-- Class name input -->
            <div class="input-group m-1">
                <input
                    id="className"
                    name="className"
                    ngModel
                    class="form-control"
                    type="text"
                    placeholder="Class Name"
                    size=17
                >
            </div>
            <!-- CRN input -->
            <div class="input-group m-1 ">
                <input
                    id="crn"
                    name="crn"
                    ngModel
                    class="form-control"
                    type="text"
                    placeholder="CRN"
                    size=10
                >
            </div>
            <!-- Professor input -->
            <div class="input-group m-1">
                <input
                    id="professor"
                    name="professor"
                    ngModel
                    class="form-control"
                    type="text"
                    placeholder="Professor"
                    size=17
                >
            </div>
            <!-- Department dropdown -->
            <div class="input-group m-1">
                <ss-multiselect-dropdown
                    id="department"
                    name="department"
                    ngModel
                    [options]="dropdownOptions"
                    [texts]="dropdownTextsSettings"
                    [settings]="dropdownRegSettings"
                    [(ngModel)]="dropdownSelectedValues"
                ></ss-multiselect-dropdown>
            </div>
            <!-- Search button -->
            <div class="input-group m-1">
                <button
                    class="btn btn-outline-primary form-control"
                    type="submit"
                >
                    Search
                </button>
            </div>
            <!-- Planner button -->
            <div class="input-group m-1">
                <button
                    [disabled]="! this.classesService.getCurrentCart().length > 0"
                    class="btn btn-primary form-control"
                    routerLink="planner"
                >
                    Go to planner
                </button>
            </div>
        </div>
    </form>

    <app-table
        [classes]="classes"
        (addButtonClicked)="addToCart($event)"
        (removeButtonClicked)="removeFromCart($event)"
    ></app-table>
    <!-- Placeholder text before data is loaded by search -->
    <h4
        class="text-center text-muted display-5"
        *ngIf="classes.length == 0 && !fetchingData"
    >
        <small>Search above to find classes...</small>
    </h4>
    <h4
        class="text-center text-muted display-5"
        *ngIf="fetchingData"
    >
        <div
            class="spinner-border"
            role="status"
        >
            <span class="sr-only">Loading...</span>
        </div>
    </h4>

</div>
